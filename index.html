<html>
        <head>
            <style>
                body{
                    margin:0;
                    height : 100%;
                    width:100%;
                    font-family : monospace;
                }
                .container>div{
                    font-size:4vh;
                }
                #output{
                    /* height: 320px;
                    width: 480px; */
                    /* margin: 0 10vh; */
                    border: 2px solid black;
                    border-radius: 10px;
                    display: flex;
                    margin-left: calc(50% - 240px);
                }
                input{
                    margin : 5vh 0;
                    width : 30vw;
                    height : 10vh;
                    line-height: 10vh;
                    margin-left : 15vw;
                }
                .container{
                    width : 60vw;
                    height : auto;
                    display : flex;
                    flex-direction : column;
                }

                #pred{
                    margin : 5vh 0;
                    text-align : center;
                }
            </style>
            <script src="tf.min.js"></script>
        </head>
        <body>
            <center>
                <div class='container'>  
                    <input type="file"  accept="image/*" name="ima" id="file">
                    <img id="output"/>	
                    <div id="pred"></div>
                </div>
            </center>

          
        </body>
        <script>
            var loadFile = async function(event) {
                var image = document.getElementById('output');
                image.src = URL.createObjectURL(event.target.files[0]);
                // const check = tf.browser.fromPixels(image).resizeNearestNeighbor([320, 480]).toFloat().expandDims();
                // console.log(check);
                const pred = document.querySelector('#pred');
                let blob = await fetch(image.src).then(r => r.blob());
                let dataUrl = await new Promise(resolve => {
                let reader = new FileReader();
                reader.onload = () => resolve(reader.result);
                reader.readAsDataURL(blob);
                })
                    let data = {
                        "encoded_string": dataUrl,
                        "pnr": "newwow",
                        "flight_no": "0765",
                        "flight_op": "MH"
                    }

                    let response = await fetch('https://39u3b3cep7.execute-api.ap-south-1.amazonaws.com/prod/checker', {
                        method: 'POST',
                        headers: {
                        'Content-Type': 'application/json;charset=utf-8'
                        },
                        body: JSON.stringify(data)
                    });

                    let result = await response.json();
                    console.log(result);
                    pred.innerText=result.label;

                // async function predictor() {
                //     const model = await tf.loadLayersModel('model/model.json');
                //     // model.summary();
                //     const prediction = model.predict(check);
                //     pred.innerText += prediction;
                //     prediction.print();
                // }
                // predictor();
            }



            inp = document.querySelector('input');
            inp.onchange = () => loadFile(event);
            
        </script>
</html>